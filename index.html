<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Weather App</title>
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      color: #fff;
      text-align: center;
      background: linear-gradient(to bottom, #c5b6ff, #69e4ff);
      min-height: 100vh;
      overflow: hidden;
      position: relative;
    }
    header {
      padding: 25px;
      font-size: 3rem;   /* Bigger title */
      font-weight: bold;
      text-shadow: 3px 3px 8px rgba(0,0,0,0.4);
    }
    #search-box {
      margin: 25px;
    }
    #search-box input {
      padding: 12px 15px;
      font-size: 1.5rem;   /* Bigger input text */
      border-radius: 12px;
      border: none;
    }
    #search-box button {
      padding: 12px 18px;
      font-size: 1.3rem;   /* Bigger button text */
      border-radius: 12px;
      border: none;
      background: #fff;
      cursor: pointer;
      margin-left: 8px;
    }
    #weather {
      margin-top: 35px;
      font-size: 1.6rem;   /* Bigger weather text */
    }
    .temp {
      font-size: 4rem;   /* Bigger temperature */
      margin: 15px 0;
      font-weight: bold;
    }

    /* --- Decorative Animations --- */
    .cloud {
      position: absolute;
      background: #fff;
      border-radius: 50%;
      opacity: 0.8;
      animation: floatCloud 60s linear infinite;
    }
    @keyframes floatCloud {
      0% { left: -200px; }
      100% { left: 110%; }
    }
    .sun {
      position: absolute;
      top: 60px;
      right: 80px;
      width: 120px;
      height: 120px;
      border-radius: 50%;
      background: radial-gradient(circle, #fffacd, #ffd700);
      animation: pulse 3s ease-in-out infinite;
      box-shadow: 0 0 35px #fffacd;
    }
    @keyframes pulse {
      0%, 100% { transform: scale(1); opacity: 1; }
      50% { transform: scale(1.1); opacity: 0.8; }
    }
    .star {
      position: absolute;
      width: 3px;
      height: 3px;
      background: white;
      border-radius: 50%;
      animation: twinkle 2s infinite alternate;
    }
    @keyframes twinkle {
      from { opacity: 0.3; }
      to { opacity: 1; }
    }

    /* --- Weather Animations --- */
    .rain {
      position: absolute;
      width: 3px;
      height: 25px;
      background: rgba(255,255,255,0.7);
      animation: fall 1s linear infinite;
    }
    @keyframes fall {
      0% { transform: translateY(-100px); }
      100% { transform: translateY(100vh); }
    }
    .snow {
      position: absolute;
      width: 10px;
      height: 10px;
      background: white;
      border-radius: 50%;
      animation: snowFall 5s linear infinite;
    }
    @keyframes snowFall {
      0% { transform: translateY(-10px); }
      100% { transform: translateY(100vh); }
    }
    .flash {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: white;
      opacity: 0;
      animation: lightning 3s infinite;
      pointer-events: none;
    }
    @keyframes lightning {
      0%, 95%, 100% { opacity: 0; }
      96% { opacity: 0.8; }
    }
  </style>
</head>
<body>
  <header>Weather App</header>
  <div class="sun" id="sun"></div>
  <div id="search-box">
    <input type="text" id="cityInput" placeholder="Search city...">
    <button onclick="searchCity()">Search</button>
    <button onclick="useLocation()">üìç Use My Location</button>
  </div>
  <div id="weather"></div>

  <script>
    const apiKey = "67e6a637b3c84b489cc75319250109";
    const weatherBox = document.getElementById("weather");

    // Decorative clouds
    for (let i = 0; i < 5; i++) {
      let cloud = document.createElement("div");
      cloud.className = "cloud";
      cloud.style.width = 80 + Math.random()*50 + "px";
      cloud.style.height = 50 + Math.random()*30 + "px";
      cloud.style.top = Math.random()*200 + "px";
      cloud.style.left = Math.random()*100 + "vw";
      cloud.style.animationDuration = 40 + Math.random()*30 + "s";
      document.body.appendChild(cloud);
    }

    // Stars (night mode)
    for (let i = 0; i < 30; i++) {
      let star = document.createElement("div");
      star.className = "star";
      star.style.top = Math.random()*100 + "vh";
      star.style.left = Math.random()*100 + "vw";
      star.style.animationDelay = Math.random()*2 + "s";
      document.body.appendChild(star);
    }

    async function getWeather(query) {
      try {
        const res = await fetch(`https://api.weatherapi.com/v1/current.json?key=${apiKey}&q=${query}&aqi=no`);
        const data = await res.json();
        displayWeather(data);
      } catch (err) {
        console.error(err);
        weatherBox.innerHTML = "‚ö† Error fetching weather!";
      }
    }

    function displayWeather(data) {
      if (!data || !data.current) {
        weatherBox.innerHTML = "‚ö† Weather data unavailable";
        return;
      }
      weatherBox.innerHTML = `
        <div><strong>${data.location.name}, ${data.location.country}</strong></div>
        <div class="temp">${Math.round(data.current.temp_c)}¬∞C</div>
        <div>${data.current.condition.text}</div>
        <div>üíß Humidity: ${data.current.humidity}%</div>
        <div>üí® Wind: ${data.current.wind_kph} kph</div>
      `;
      startAnimation(data.current.condition.text, data.current.is_day);
    }

    function startAnimation(condition, isDay) {
      document.querySelectorAll(".rain, .snow, .flash").forEach(e => e.remove());
      document.getElementById("sun").style.display = isDay ? "block" : "none";

      // Night = stars visible
      document.querySelectorAll(".star").forEach(star => {
        star.style.display = isDay ? "none" : "block";
      });

      if (/rain|drizzle|shower/i.test(condition)) {
        for (let i = 0; i < 40; i++) {
          let drop = document.createElement("div");
          drop.className = "rain";
          drop.style.left = Math.random() * 100 + "vw";
          drop.style.animationDuration = (0.5 + Math.random()) + "s";
          document.body.appendChild(drop);
        }
      } else if (/snow|sleet|flurries/i.test(condition)) {
        for (let i = 0; i < 25; i++) {
          let flake = document.createElement("div");
          flake.className = "snow";
          flake.style.left = Math.random() * 100 + "vw";
          flake.style.animationDuration = (3 + Math.random() * 2) + "s";
          document.body.appendChild(flake);
        }
      } else if (/storm|thunder/i.test(condition)) {
        let flash = document.createElement("div");
        flash.className = "flash";
        document.body.appendChild(flash);
      }
    }

    function useLocation() {
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(
          pos => {
            const query = pos.coords.latitude + "," + pos.coords.longitude;
            getWeather(query);
          },
          () => {
            weatherBox.innerHTML = "‚ö† Location access denied.";
          }
        );
      } else {
        weatherBox.innerHTML = "‚ö† Geolocation not supported.";
      }
    }

    function searchCity() {
      const city = document.getElementById("cityInput").value;
      if (city) getWeather(city);
    }

    // Auto-load user location
    window.onload = useLocation;
  </script>
</body>
</html>
